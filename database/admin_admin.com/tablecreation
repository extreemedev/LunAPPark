CREATE TABLE IF NOT EXISTS BigliettoPdf(
	codice int not null,
	tipo varchar(10) not null,
	prezzo real not null,
	giorno date not null,
PRIMARY KEY(codice)
);

CREATE TABLE IF NOT EXISTS Manutenzione(
	piva varchar(16) not null,
	nome varchar(10) not null,
	residenzafiscale(35) int not null,
	man_città varchar(20) not null,
PRIMARY KEY(piva),
FOREIGN KEY(man_città) REFERENCES Città(nome)
);

CREATE TABLE IF NOT EXISTS Alimenti(
	piva varchar(16) not null,
	nome varchar(10) not null,
	residenzafiscale(35) int not null,
	alim_città varchar(20) not null,
PRIMARY KEY(piva),
FOREIGN KEY(alim_città) REFERENCES Città(nome)
);

CREATE TABLE IF NOT EXISTS Articoli(
	piva varchar(16) not null,
	nome varchar(10) not null,
	residenzafiscale(35) int not null,
	art_città varchar(20) not null,
PRIMARY KEY(piva),
FOREIGN KEY(art_città) REFERENCES Città(nome)
);

CREATE TABLE IF NOT EXISTS Pulizia(
	piva varchar(16) not null,
	nome varchar(10) not null,
	residenzafiscale(35) int not null,
	pul_città varchar(20) not null,
PRIMARY KEY(piva),
FOREIGN KEY(pul_città) REFERENCES Città(nome)
);

CREATE TABLE IF NOT EXISTS UtenteRegistrato(
	cf varchar(16) not null,
	nome varchar(10) not null,
	cognome varchar(10) not null,
	data_nascita date not null,
	telefono varchar(10) not null unique,
	user_mail varchar(50) not null,
	user_password binary(64) not null,
PRIMARY KEY(cf)
);

CREATE TABLE IF NOT EXISTS Dipendente(
	cf varchar(16) not null,
	nome varchar(10) not null,
	cognome varchar(10) not null,
	data_nascita date not null,
	telefono varchar(10) not null unique,
	matricola varchar(8) not null,
	indirizzo varchar(20) not null,
	dip_punto int not null,
	dip_loc int not null,
	dip_attr int not null,
PRIMARY KEY(cf),
FOREIGN KEY(dip_punto) REFERENCES PuntoVendita(id),
FOREIGN KEY(dip_loc) REFERENCES Locale(id),
FOREIGN KEY(dip_attr) REFERENCES Attrazione(id)
);

CREATE TABLE IF NOT EXISTS Titolare(
	idtitolare varchar(16) not null,
	tit_punto int not null,
PRIMARY KEY(idtitolare),
FOREIGN KEY(idtitolare) REFERENCES Dipendente(cf),
FOREIGN KEY(tit_punto) REFERENCES PuntoVendita(id)
);

CREATE TABLE IF NOT EXISTS BigliettoCarta(
	codice int not null,
	tipo varchar(10) not null,
	prezzo real not null,
	giorno date not null,
	carta_punto int not null,
PRIMARY KEY(codice),
FOREIGN KEY(carta_punto) REFERENCES PuntoVendita(id)
);

CREATE TABLE IF NOT EXISTS Biglietteria(
	park_data date not null,
	posti_disponibili int not null,
	check (posti_disponibili >= 0),
PRIMARY KEY(park_data)
);

CREATE TABLE IF NOT EXISTS PuntoVendita(
	id int not null auto_increment,
	apertura date not null,
	chiusura date not null,
PRIMARY KEY(id)
);

CREATE TABLE IF NOT EXISTS PrenotazioneHotel(
	n_pren int not null,
	n_persone int not null,
	prezzo real not null,
	check_in date not null,
	check_out date not null,
	pren_utente varchar(16) not null,
	pren_hotel varchar(16) not null,
PRIMARY KEY(n_pren),
FOREIGN KEY(pren_utente) REFERENCES UtenteRegistrato(cf),
FOREIGN KEY(pren_hotel) REFERENCES Hotel(piva)
);

CREATE TABLE IF NOT EXISTS Hotel(
	piva varchar(16) not null,
	nome varchar(10) not null,
	indirizzo varchar(20) not null,
	stelle,
	hotel_città varchar(20) not null,
PRIMARY KEY(piva),
FOREIGN KEY(hotel_città) REFERENCES Città(nome)
);

CREATE TABLE IF NOT EXISTS Stanza(
	numero int not null,
	stanza_hotel varchar(16) not null,
	tipo,
	piano int not null,
	n_letti int(5) not null,
	check (piano > 0),
	check (n_letti > 0),
PRIMARY KEY(numero, stanza_hotel),
FOREIGN KEY(stanza_hotel) REFERENCES Hotel(piva)
);

CREATE TABLE IF NOT EXISTS Città(
	nome varchar(20) not null,
	distanza_parco real not null,
PRIMARY KEY(nome)
);